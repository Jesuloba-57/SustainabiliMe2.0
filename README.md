# SustainabiliMe
## What is SustainabiliMe?
SustainabiliMe is a web application that helps users become more sustainble in their daily lives. At this point in time, SustainabiliMe can be used to find routes to certain places using public transportation or finding recycling centers nearby. With SustainabiliMe, users can do their own small part in fighting climate change.

## Main Files
* `main.py` - runs the SustainabiliMe app
* `transAPI.py` - provides transit routes and descriptions
* `recycle.py` - provides locations where a certain item can be recycled
* `db_model.py` - creates a database of app users
* `authorization.py` - transfers backend programming aspects to frontend of web app
* `views.py` - renders landing pages

## APIs, Installations, & Imports
### APIs
#### here API
https://developer.here.com/
`here` is an API that provides public transit and walking routes to destinations. This API was used in transAPI.py. To use this API, you must create an account, follow the instructions to create an app, then store credentials generated by the app.

#### Geopy API
https://geopy.readthedocs.io/
`geopy` is an API that can convert coordinates into addresses and vice versa. This API was used in transAPI.py and recycle.py. No credentials are required for this API.

#### Earth911 API
https://api.earth911.com/
`Earth911` is an API that provides recycling centers based on user search criteria. This API was used in recycle.py. To use this API, you must request a key from the Earth911 team.

### Installations
The following installations must be made in the terminal to run this app:
* `pip install herepy` - installs here API
* `pip install geopy` - installs Geopy API
* `pip install flask` - installs Flask web framework
* `pip install flask-login` - installs Flask user functions like logging in and signing out
* `pip install Flask-SQLAlchemy` - installs Flask database functions

### Imports
#### main.py
```python
from SustainabiliMe import create_app # imports necessary function to create app
```

#### transAPI
```python
import requests  # access to GET and POST to retrieve or post information
import json # helps parse requests for information
from geopy.geocoders import Nominatim # Geopy access to Nominatim, which searches for addresses
import sys # access to functions that manipulate runtime environment
```

#### recyle.py
```python
import requests # access to GET and POST to retrieve or post information
import json # helps parse requests for information
import urllib # helps fetch urls
from geopy.geocoders import Nominatim # Geopy access to Nominatim, which searches for addresses
```

#### db_model.py
```python
from . import db # imports database functions from our main files
from flask_login import UserMixin # handles user login, logout, and session memory in Flask
from sqlalchemy.sql import func # helps call database functions
```

#### authorization.py
```python
from flask import Blueprint, render_template, request, flash, redirect, url_for # allows you to use Flask as app's web framework and its functions
from .db_model import User # imports user info from database
from . import db # imports database functions from our main files
from werkzeug.security import generate_password_hash, check_password_hash # secure hashing for user passwords
from flask_login import login_user, login_required, logout_user, current_user # imports flask-login functions for handling user sessions
from .transAPI import Transport # imports transAPI.py's main class
from .recycle import Recycle # imports recycle.py's main class
```

#### views.py
```python
from flask import Blueprint, render_template # allows you to use Flask as app's web framework and its functions
```

## Environment Functions
### API Functions
#### Geopy
* `geocode()` - takes in a given address and returns that address's coordinates
* `reverse()` - takes in given coordinates and returns the address

#### Earth911
* `searchMaterials()` - takes in name of item to be recycled and returns variables/details such as `material_id`
* `searchLocations()` - takes in coordinates and `material_id` and returns details/variables about recycling locations for that particular item


### File Functions
#### transAPI.py
* `user_inputs()` - takes in user and returns input for origin point and destination
* `get_coords()` - takes in origin point and destination from `user_inputs` and uses *Geopy API* to return coordinates for origin and destination
* `get_transit()` - takes in coordinates from `get_coords` and uses *here API* to return transportation details such as transit type, destination, and trip length
#### recycle.py
* `user_search()` - takes in user input for item they want to recycle and return's item's `material_id` from *Earth911 API*
* `get_coords()` - takes in user input for their zip code and uses *Geopy API* to return coordinates for zip code
* `get_locations()` - uses `material_id` from `user_search`, coordinates from `get_coords`, and *Earth911 API* to return the name, address, and distance of recycling locations


#### authorization.py
* `home()` - runs app's home page
* `landing()` - runs app's landing page
* `login()` - runs user login 
* `logout()` - runs user logout
* `sign_up()` - runs user sign-up
* `recycle()` - opens recycling page which allows user to find recycling locations
* `transportation()` - opens transportation page which allows user to find public transportation navigation

#### views.py
* `L_page()` - runs app's landing page
* `about()` - runs app's about page